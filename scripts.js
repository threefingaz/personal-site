function makeImgOreloaders(){document.querySelectorAll("img").forEach(img=>{img.classList.add("img--loading"),img.addEventListener("load",()=>{img.classList.remove("img--loading")})})}function setElevetion(){const elevationHeight=document.querySelector(".earlier-container").getBoundingClientRect().height;document.documentElement.style.setProperty("--elevation",`translate(0, -${getViewportHeight()-elevationHeight}px)`)}function getViewportHeight(){return window.innerHeight||document.documentElement.documentElement.clientHeight}function makeStickyHeader(){const name=document.querySelector(".intro-name"),contacts=document.querySelector(".intro-contacts"),introNav=document.querySelector(".intro-nav"),stickyHeader=document.createElement("div");stickyHeader.classList.add("sticky-header","sticky-header--hidden"),stickyHeader.innerHTML=`<div class="sticky-header-content columns"><a href="#top" class="sticky-name">${name.innerHTML}</a><ul class="sticky-nav">${introNav.innerHTML}</ul><div class="sticky-contacts">${contacts.innerHTML}</div></div>`,document.querySelector("body").insertBefore(stickyHeader,document.querySelector(".main-container"))}function handleStickyHeader(){const stickyHeader=document.querySelector(".sticky-header"),sectionInVew=entries=>{entries[0].intersectionRatio<=0&&stickyHeader.classList.remove("sticky-header--hidden"),entries[0].intersectionRatio>0&&stickyHeader.classList.add("sticky-header--hidden")},observer=new IntersectionObserver(sectionInVew);observer.observe(document.querySelector(".intro"))}function handleElevation(){const actions=document.querySelectorAll("[data-actionable='true']"),mainContainer=document.querySelector(".main-container"),earlierContainer=document.querySelector(".earlier-container");let isElevaded=!1,lastAction=null;const closeFlashbacks=()=>{mainContainer.classList.remove("main-container--elevated"),earlierContainer.classList.remove("earlier-container--flashbacks"),isElevaded=!isElevaded,lastAction=null,handleFlashbacks(!1)},checkIfSectionInVewPort=entries=>{entries[0].intersectionRatio<=0&&isElevaded&&closeFlashbacks()},observer=new IntersectionObserver(checkIfSectionInVewPort);observer.observe(earlierContainer),actions.forEach(action=>{action.addEventListener("click",e=>{const target=[...actions].indexOf(e.target);isElevaded&&lastAction===target?closeFlashbacks():(isElevaded||(isElevaded=!isElevaded,mainContainer.classList.add("main-container--elevated"),earlierContainer.classList.add("earlier-container--flashbacks")),lastAction=target,handleFlashbacks(target))})})}function handleFlashbacks(index=0){const flashbacks=document.querySelectorAll(".flashback");let current=index;!1!==index?(flashbacks.forEach(flashback=>{flashback.classList.remove("flashback--shown")}),flashbacks[current].classList.remove("flashback--hidden"),flashbacks[current].classList.add("flashback--shown")):flashbacks.forEach(flashback=>{flashback.classList.remove("flashback--shown"),flashback.ontransitionend=()=>{flashback.classList.add("flashback--hidden")}})}function makeEmailLink(){document.querySelectorAll(".contact-button").forEach(button=>{button.addEventListener("click",()=>{window.location.href="mailto:nikitin010@gmail.com?subject=Письмо с сайта"})})}makeStickyHeader(),handleStickyHeader(),setElevetion(),handleElevation(),makeEmailLink(),makeImgOreloaders(),window.addEventListener("resize",setElevetion),document.querySelector(".earlier li:not([data-actionable='true'])").addEventListener("click",e=>{"LI"===e.target.tagName&&window.open(e.target.querySelector("a").getAttribute("href"),"_blank")});